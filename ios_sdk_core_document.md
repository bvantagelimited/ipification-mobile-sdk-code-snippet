# iOS SDK 

This document describes the IPification iOS SDK and its usage. The main purpose of the SDK is to provide network-based authentication for mobile users.


**Minimum iOS required** : iOS 12

Main Flow of iOS SDK : 

1. Check Coverage
* Call the Coverage API with the client's `phone` number (GET) through the Cellular Network .
* Receive a response with: `is_available`- `true`: supported | `false`: not supported

2. Start Authentication 
*   Prepare the `authorization request` with required parameters
*   Call Authorization API with `authorization request` ( GET ) through `Cellular Network`.
*   Receive a response with: 
    *   result directly via `redirect_uri` (1) or 
    *   redirection url (`301` or `302` or `303`) (2)
*   (1) -> Parser the response then return the result to client
*   (2) -> Perform all url(s) redirection until receive the result with `redirect_uri` (through `Cellular Network`)

**Note:** All requests need to be performed via `cellular network` interface.


## Authorization Request (HTTP)

```
GET https://api.ipification.com/auth/realms/ipification/protocol/openid-connect/auth?
response_type=code&
client_id={client-id}&
redirect_uri={client-callback-uri}&
scope=openid ip:phone_verify&
state={state}&
login_hint={login_hint}
-------
Response: 
(1) 200 - redirect_uri?code=abcxyz&state={state}
(2) 30x - url redirection (ex: https://mnv.telco.com/webhook/api/webhook/auth?state=xyzabc)
```

##### Parameters:
|     Name     | Description |
| ------------- | ------------- |
| client_id | unique identifier of the client that is generated by IPification and provided to client during the onboarding process. |
| redirect_uri |  is used when redirecting a user back to the client application. During the onboarding process, the client's `redirect_uri` will be provided, this value can represent wildcard uri and will be used to validate provided `redirect_uri` in the request. Redirect URI must be same accross all requestst in a flow. |
| scope | use `openid ip:phone_verify` for phone number verifying  |
| login_hint | end-user phone number (MSISDN).Phone number should be specified according to the E.164 number formatting (http://en.wikipedia.org/wiki/E.164) without leading + sign. |
|mcc (optional) | Mobile Country Code |
|mnc (optional) | Mobile Network Code |
| consent_id (optional) | Unique ID for the consent that is traceable if consent audit is required. Value will be provided if needed in integration process. |
| consent_timestamp (optional) | The time stamp when consent was accepted by end user. Accepted format is UNIX time stamp in seconds. |


For more detail, please check our developer document: https://developer.ipification.com/#/ios/latest/


## iOS Code Snippet
https://github.com/bvantagelimited/ipification-mobile-sdk-code-snippet/blob/main/ios_IPificationService.swift

### License


```
Copyright 2022 IPification, Inc.

Licensed to the Apache Software Foundation (ASF) under one or more contributor
license agreements. See the NOTICE file distributed with this work for
additional information regarding copyright ownership. The ASF licenses this
file to you under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
```
